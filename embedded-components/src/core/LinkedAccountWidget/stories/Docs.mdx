import { Meta } from '@storybook/blocks';

<Meta title="Core/LinkedAccountWidget" />

# LinkedAccountWidget

A comprehensive component for managing linked bank accounts in embedded finance applications.

## What It Does

- ðŸ“‹ View all linked accounts with their statuses
- âž• Add new accounts through a guided form
- âœ… Verify microdeposits to activate accounts
- ðŸ”„ Manage account lifecycle (active, inactive, rejected)
- ðŸ’¸ Integrate with payment flows

## Quick Start

```tsx
import {
  EBComponentsProvider,
  LinkedAccountWidget,
} from '@embedded-components/core';

function App() {
  return (
    <EBComponentsProvider
      apiBaseUrl="https://your-api.com/v1"
      headers={{ 'X-API-Key': 'your-key' }}
    >
      <LinkedAccountWidget variant="default" clientId="your-client-id" />
    </EBComponentsProvider>
  );
}
```

## Props

- **`variant`** - `'default' | 'singleAccount'` - Display mode (`default` shows all accounts, `singleAccount` auto-hides create button when active account exists)
- **`clientId`** - `string` (required) - Client identifier for API requests
- **`showCreateButton`** - `boolean` - Controls "Link New Account" button visibility
- **`makePaymentComponent`** - `ReactNode` - Optional payment component to render in account cards
- **`onLinkedAccountSettled`** - `(recipient?, error?) => void` - Callback when account creation/verification completes
- **`className`** - `string` - Additional CSS classes

## Exploring Stories

Use the Storybook sidebar to explore:

- **Default, SingleAccountVariant, EmptyState** - Basic configurations
- **Status/** - All account lifecycle states
- **Integration/** - Payment integration and callbacks
- **Workflows/** - Interactive demonstrations with play functions

## Global Controls

All stories support **theme** and **locale** controls via the Storybook toolbar.
These are globally available across all embedded-components stories!

## Account Status Lifecycle

```
Create Account â†’ MICRODEPOSITS_INITIATED â†’ READY_FOR_VALIDATION â†’ ACTIVE/REJECTED
```

See individual Status/\* stories for details on each state.
